<div class="min-h-screen bg-white font-sans text-gray-800">
  <!-- Header -->
  <header class="flex justify-between items-center px-8 py-6 border-b border-gray-100">
    <div class="flex items-center gap-2">
      <span class="text-xl font-semibold tracking-tight">ChromaMind</span>
    </div>
    <button (click)="exportTokens()" class="flex items-center gap-2 text-gray-500 hover:text-gray-800 transition-colors text-sm font-medium">
      <span class="material-icons text-lg">download</span>
      Exportar Design Tokens (CSS/JSON)
    </button>
  </header>

  <main class="container mx-auto px-6 py-12">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
      
      <!-- Left Column: Generator -->
      <div class="lg:col-span-8 space-y-12">
        <div class="flex flex-col items-center space-y-8">
          <!-- Visual Color Wheel (CSS Gradient) -->
          <div #colorWheel
               (mousedown)="startDrag($event, -1)"
               class="relative w-48 h-48 rounded-full shadow-xl ring-4 ring-white cursor-crosshair active:scale-95 transition-transform select-none">
            <!-- Standard HSL Conic Gradient -->
            <div class="absolute inset-0 rounded-full pointer-events-none" 
                 style="background: conic-gradient(from 90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff, #ff0000);">
            </div>
            <!-- Saturation/Lightness Overlay -->
            <div class="absolute inset-0 rounded-full bg-[radial-gradient(circle,white,transparent_70%)] opacity-50 pointer-events-none"></div>
            
            <!-- Draggable Markers -->
            <div *ngFor="let marker of markers; let i = index"
                 class="absolute w-6 h-6 rounded-full border-2 border-white shadow-md transform -translate-x-1/2 -translate-y-1/2 transition-transform duration-75 cursor-move hover:scale-110"
                 [style.left.px]="96 + marker.x"
                 [style.top.px]="96 + marker.y"
                 [style.backgroundColor]="marker.color"
                 (mousedown)="startDrag($event, i); $event.stopPropagation()">
            </div>
          </div>

          <!-- Input Field -->
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-lg shadow-sm border border-gray-200" [style.backgroundColor]="baseColor"></div>
            <div class="relative flex gap-2">
              <input type="text" [ngModel]="baseColor" (ngModelChange)="onHexChange($event)"
                     class="pl-4 pr-4 py-2 rounded-lg border border-gray-200 text-gray-600 font-mono focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm"
                     placeholder="#d1e6ad">
              <button (click)="generatePalette()" class="bg-gray-900 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-800 transition-colors">
                Generate
              </button>
            </div>
          </div>

          <!-- Count Slider -->
          <div class="flex items-center gap-3">
            <div class="relative flex items-center">
              <span class="text-xs text-gray-400 absolute -bottom-6 left-0">5</span>
              <input type="range" min="5" max="15" step="1" 
                     [ngModel]="colorCount" (ngModelChange)="onCountChange($event)"
                     class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500">
              <span class="text-xs text-gray-400 absolute -bottom-6 right-0">15</span>
            </div>
          </div>
        </div>


        <!-- Harmony Selector -->
        <div class="flex justify-center border-b border-gray-200">
          <div class="flex gap-8">
            <button *ngFor="let harmony of harmonies"
                    class="pb-4 text-sm font-medium transition-colors relative"
                    [class.text-gray-800]="selectedHarmony === harmony"
                    [class.text-gray-400]="selectedHarmony !== harmony"
                    (click)="onHarmonyChange(harmony)">
              {{ harmony }}
              <div *ngIf="selectedHarmony === harmony" class="absolute bottom-0 left-0 right-0 h-0.5 bg-gray-800 rounded-t-full"></div>
            </button>
          </div>
        </div>

        <!-- Palette Grid -->
        <div class="grid grid-cols-5 gap-4 min-h-[24rem]">
          <div *ngFor="let color of currentPalette" class="group relative flex flex-col h-full">
            <!-- Color Card -->
            <div class="flex-grow rounded-2xl shadow-sm transition-all duration-300 hover:shadow-lg hover:-translate-y-1 cursor-pointer min-h-[10rem]"
                 [style.backgroundColor]="color.hex">
            </div>
            
            <!-- Info -->
            <div class="mt-4 space-y-2">
              <div class="flex items-center justify-between">
                <span class="font-mono text-sm text-gray-600 font-medium">{{ color.hex }}</span>
              </div>
              
              <!-- WCAG Badge -->
              <div class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-green-50 border border-green-100"
                   [ngClass]="{'bg-red-50 border-red-100': color.wcag === 'Fail'}">
                <span class="material-icons text-[14px]"
                      [ngClass]="color.wcag === 'Fail' ? 'text-red-600' : 'text-green-600'">
                  {{ color.wcag === 'Fail' ? 'close' : 'check' }}
                </span>
                <span class="text-xs font-semibold"
                      [ngClass]="color.wcag === 'Fail' ? 'text-red-700' : 'text-green-700'">
                  WCAG {{ color.wcag }}
                </span>
              </div>
            </div>
          </div>

          <ng-container *ngIf="currentPalette.length < 15">
             <div *ngFor="let i of [].constructor(15 - currentPalette.length)" 
                  class="group relative flex flex-col h-full opacity-50 border-2 border-dashed border-gray-200 rounded-2xl p-4 items-center justify-center min-h-[14rem]">
                <span class="material-icons text-gray-300 text-3xl">add</span>
             </div>
          </ng-container>
        </div>
      </div>

      <!-- Right Column: Live Preview -->
      <div class="lg:col-span-4 pl-4 border-l border-gray-100" *ngIf="previewColors.length > 0">
        <div class="sticky top-8">
          <h3 class="text-sm font-semibold text-gray-500 mb-1">Live UI Preview</h3>
          <p class="text-xs text-gray-400 mb-8">Veja suas cores em ação</p>

          <div class="space-y-6">
            <!-- Stats Card -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-5">
              <div class="flex items-start justify-between mb-4">
                <div class="p-2 rounded-lg bg-gray-50">
                  <span class="material-icons text-gray-400">show_chart</span>
                </div>
                <div class="text-right">
                  <p class="text-xs text-gray-400 font-medium">Total Revenue</p>
                  <p class="text-lg font-bold text-gray-800">$45,231.89</p>
                </div>
              </div>
              <div class="inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold text-white"
                   [style.backgroundColor]="previewColors[1].hex">
                <span>+20.1%</span>
                <span>from last month</span>
              </div>
            </div>

            <!-- Grid Stats -->
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4"
                   [style.backgroundColor]="previewColors[1].hex">
                <div class="flex flex-col h-full justify-between text-white">
                  <span class="material-icons opacity-80">group</span>
                  <div>
                    <p class="text-xs opacity-80">Users</p>
                    <p class="text-xl font-bold">2,845</p>
                  </div>
                </div>
              </div>
              <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-4"
                   [style.backgroundColor]="previewColors[3].hex">
                <div class="flex flex-col h-full justify-between text-white">
                  <span class="material-icons opacity-80">attach_money</span>
                  <div>
                    <p class="text-xs opacity-80">Sales</p>
                    <p class="text-xl font-bold">$12.4k</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Buttons -->
            <div class="space-y-3 pt-4">
              <button class="w-full py-3 rounded-lg font-medium text-white shadow-sm transition-transform active:scale-95"
                      [style.backgroundColor]="previewColors[2].hex">
                Primary Button
              </button>
              
              <button class="w-full py-3 rounded-lg font-medium bg-white border-2 transition-colors hover:bg-gray-50"
                      [style.borderColor]="previewColors[3].hex"
                      [style.color]="previewColors[0].hex">
                Secondary Button
              </button>

              <button class="w-full py-3 rounded-lg font-medium text-white shadow-sm"
                      [style.backgroundColor]="previewColors[0].hex">
                Accent Button
              </button>
            </div>

            <!-- Form Element -->
            <div class="pt-4">
              <div class="relative">
                <input type="text" placeholder="Email address" 
                       class="w-full px-4 py-3 rounded-lg border bg-white focus:outline-none focus:ring-2 transition-shadow"
                       [style.borderColor]="previewColors[3].hex"
                       [style.color]="previewColors[0].hex">
              </div>
              <div class="flex items-center gap-2 mt-3">
                <div class="w-4 h-4 rounded border flex items-center justify-center"
                     [style.backgroundColor]="previewColors[0].hex">
                     <span class="material-icons text-white text-[10px]">check</span>
                </div>
                <span class="text-sm text-gray-600">I agree to the terms</span>
              </div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </main>
</div>
